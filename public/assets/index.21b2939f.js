var z=Object.defineProperty;var M=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var D=(t,e,o)=>e in t?z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,F=(t,e)=>{for(var o in e||(e={}))H.call(e,o)&&D(t,o,e[o]);if(M)for(var o of M(e))G.call(e,o)&&D(t,o,e[o]);return t};import{_ as y,r as f,o as c,c as u,a as s,t as m,b as S,w as _,d as x,n as j,e as p,f as d,F as w,g as E,E as q,h as J,i as Y,j as Q,k as v,v as A,l as C,m as T,p as W,q as K,C as X,s as Z,u as ee,D as te,B as oe,x as ne,y as se,z as re,A as ie,G as ae,H as le,I as ce,J as ue}from"./vendor.0d4fcfa0.js";const de=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}};de();function pe(t,e){const o=({detail:a})=>{e(a)};return window.addEventListener(t,o),()=>{window.removeEventListener(t,o)}}function L(t,e){window.dispatchEvent(new CustomEvent(t,{detail:e}))}const _e={on:pe,emit:L};function b(t,e="success"){L("show-msg",{txt:t,type:e})}const ye={data(){return{msg:null,removeEventListener:null}},created(){this.unsubscribe=_e.on("show-msg",this.showMsg)},methods:{showMsg(t){this.msg=t,setTimeout(()=>{this.msg=null},3e3)}},unmounted(){this.unsubscribe()}},he={class:"texts"},me=p("Learn More about this website");function fe(t,e,o,a,n,r){const i=f("router-link");return n.msg?(c(),u("div",{key:0,class:j(["user-msg",n.msg.type])},[s("div",he,[s("h2",null,m(n.msg.type),1),s("p",null,m(n.msg.txt),1),n.msg.link?(c(),S(i,{key:0,to:n.msg.link,class:"learn-more"},{default:_(()=>[me]),_:1},8,["to"])):x("",!0)])],2)):x("",!0)}var O=y(ye,[["render",fe],["__scopeId","data-v-908a1534"]]);const ge={name:"AppHeader",components:{},data(){return{}},created(){},methods:{},computed:{},unmounted(){}},ve={class:"app"},$e=s("h3",null,"Toys",-1),be={class:"nav"},Te=p("Home"),ke=p("Toys"),Se=p("About"),we=p("Dashboard");function Be(t,e,o,a,n,r){const i=f("RouterLink");return c(),u("section",ve,[$e,s("nav",be,[d(i,{to:"/"},{default:_(()=>[Te]),_:1}),d(i,{to:"/toy"},{default:_(()=>[ke]),_:1}),d(i,{to:"/about"},{default:_(()=>[Se]),_:1}),d(i,{to:"/dashboard"},{default:_(()=>[we]),_:1})])])}var R=y(ge,[["render",Be]]);const xe={components:{AppHeader:R,UserMsg:O},created(){this.$store.dispatch({type:"loadToys"})}};function Ce(t,e,o,a,n,r){const i=R,h=f("RouterView"),l=O;return c(),u(w,null,[d(i),d(h),d(l)],64)}var Ee=y(xe,[["render",Ce]]);const Ae={components:{},methods:{doIt(){console.log("doing it...")}}},Ie=s("h1",null,"Hello welcome",-1),Me=[Ie];function De(t,e,o,a,n,r){return c(),u("main",null,Me)}var Fe=y(Ae,[["render",De]]);const Le={name:"App",data(){return{center:{lat:51.093048,lng:6.84212},markers:[{position:{lat:51.093048,lng:6.84212}}]}}},Oe={class:"about"};function Re(t,e,o,a,n,r){const i=f("GMapMarker"),h=f("GMapCluster"),l=f("GMapMap");return c(),u("section",Oe,[d(l,{center:n.center,zoom:7,"map-type-id":"terrain"},{default:_(()=>[d(h,null,{default:_(()=>[(c(!0),u(w,null,E(n.markers,(g,I)=>(c(),S(i,{key:I,position:g.position,clickable:!0,draggable:!0,onClick:oo=>n.center=g.position},null,8,["position","onClick"]))),128))]),_:1})]),_:1},8,["center"])])}var Ne=y(Le,[["render",Re]]);const Pe={name:"ToyPreview",props:{toy:{type:Object,required:!0,default:12,default(){return{name:"",price:null,labels:["Doll","Battery Powered","Baby"],createdAt:new Date(Date.now()).toLocaleString(),inStock:!0,reviews:[]}}},sign:{type:String,required:!1,validator(t){return["$","&","@"].includes(t)}}},components:{},data(){return{}},created(){},methods:{},computed:{},unmounted(){}},Ve=s("img",{src:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png",class:"image"},null,-1),Ue={style:{padding:"14px"}},ze={class:"bottom"},He={class:"time"};function Ge(t,e,o,a,n,r){const i=q;return c(),u("section",null,[d(i,{"body-style":{padding:"0px"}},{default:_(()=>[Ve,s("div",Ue,[s("span",null,m(o.toy.name),1),s("div",ze,[s("time",He,m(o.toy.price)+"$",1),s("h4",null,"In stock? "+m(o.toy.inStock),1)])])]),_:1})])}var N=y(Pe,[["render",Ge]]);const je={name:"ToyList",props:{toys:Array},components:{ToyPreview:N},data(){return{}},created(){},methods:{remove(t){this.$emit("remove",t)}},computed:{},unmounted(){}},qe={class:"clean-list margin-top"},Je={class:"btns-container"},Ye=p("Remove"),Qe=p("Edit"),We=p("Details");function Ke(t,e,o,a,n,r){const i=N,h=J,l=f("RouterLink");return c(),u("section",null,[s("ul",qe,[(c(!0),u(w,null,E(o.toys,g=>(c(),u("li",{key:g._id,class:""},[d(i,{sign:"$",toy:g},null,8,["toy"]),s("div",Je,[d(h,{onClick:I=>r.remove(g._id),color:"#626aef",style:{color:"white"}},{default:_(()=>[Ye]),_:2},1032,["onClick"]),d(l,{class:"btn-basic",to:`/toy/edit/${g._id}`},{default:_(()=>[Qe]),_:2},1032,["to"]),d(l,{class:"btn-basic",to:`/toy/${g._id}`},{default:_(()=>[We]),_:2},1032,["to"])])]))),128))])])}var P=y(je,[["render",Ke]]);function Xe(t=5){var e="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let a=0;a<t;a++)e+=o.charAt(Math.floor(Math.random()*o.length));return e}function Ze(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function et(t,e){let o;return function(...n){const r=()=>{clearTimeout(o),t(...n)};clearTimeout(o),o=setTimeout(r,e)}}const tt={makeId:Xe,getRandomInt:Ze,debounce:et},ot={name:"ToyFilter",data(){return{filterBy:{name:"",lable:"",inStock:null,sortBy:""},labels:["On wheels","Box game","Art","Baby","Doll","Puzzle","Outdoor"]}},created(){this.setFilter=tt.debounce(this.setFilter,1e3)},methods:{setFilter(){console.log(this.filterBy),this.$emit("set-filter",this.filterBy)}}},nt=p(" Search a toy: "),st=p(" Stock: "),rt=s("option",{value:""},"All",-1),it=s("option",{value:"true"},"In stock",-1),at=s("option",{value:"false"},"Not in stock",-1),lt=[rt,it,at],ct=p(" Labels: "),ut=p(" Sort By: "),dt=s("option",{value:"time"},"Time",-1),pt=s("option",{value:"name"},"Name",-1),_t=s("option",{value:"price"},"Price",-1),yt=[dt,pt,_t];function ht(t,e,o,a,n,r){const i=Y,h=Q;return c(),u("section",null,[s("label",null,[nt,v(s("input",{onInput:e[0]||(e[0]=(...l)=>r.setFilter&&r.setFilter(...l)),placeholder:"Search....","onUpdate:modelValue":e[1]||(e[1]=l=>n.filterBy.name=l)},null,544),[[A,n.filterBy.name]])]),s("label",null,[st,v(s("select",{onChange:e[2]||(e[2]=(...l)=>r.setFilter&&r.setFilter(...l)),"onUpdate:modelValue":e[3]||(e[3]=l=>n.filterBy.inStock=l)},lt,544),[[C,n.filterBy.inStock]])]),s("label",null,[ct,d(h,{modelValue:n.filterBy.lable,"onUpdate:modelValue":e[4]||(e[4]=l=>n.filterBy.lable=l),multiple:"",placeholder:"Select",style:{width:"240px"},onChange:r.setFilter},{default:_(()=>[(c(!0),u(w,null,E(n.labels,l=>(c(),S(i,{key:l,label:l,value:l},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),s("label",null,[ut,v(s("select",{onChange:e[5]||(e[5]=(...l)=>r.setFilter&&r.setFilter(...l)),"onUpdate:modelValue":e[6]||(e[6]=l=>n.filterBy.sortBy=l)},yt,544),[[C,n.filterBy.sortBy]])])])])}var V=y(ot,[["render",ht]]);const mt={components:{ToyList:P,ToyFilter:V},data(){return{filterBy:null}},created(){},methods:{removeToy(t){this.$store.dispatch({type:"removeToy",id:t}).then(()=>{b("Removed successfully","success")}).catch(()=>{b("Cannot remove toy","error")})},setFilter(t){console.log(t);const e=JSON.parse(JSON.stringify(t));console.log(e),this.$store.dispatch({type:"setFilterAct",filterBy:e})}},computed:{toys(){return this.$store.getters.toysToShow}}},ft={class:"toy-app app-main"},gt=s("h3",null,"Toys",-1),vt=p("Add a new toy");function $t(t,e,o,a,n,r){const i=f("RouterLink"),h=V,l=P;return c(),u("section",ft,[gt,d(i,{class:"btn-basic",to:"/toy/edit"},{default:_(()=>[vt]),_:1}),d(h,{onSetFilter:r.setFilter},null,8,["onSetFilter"]),d(l,{toys:r.toys,onRemove:r.removeToy},null,8,["toys","onRemove"])])}var bt=y(mt,[["render",$t]]);const Tt={components:{},data(){return{toy:null}},async created(){const{id:t}=this.$route.params;this.$store.dispatch({type:"getToyById",toyId:t}).then(e=>{this.toy=e}).catch(()=>showMsg("Cannot get toy","danger"))},methods:{}},kt={key:0,class:""},St=s("h3",null,"Toy Details",-1),wt={key:1,class:"loading"};function Bt(t,e,o,a,n,r){return n.toy?(c(),u("section",kt,[St,s("p",null,"ID: "+m(n.toy._id),1),s("p",null,"Name: "+m(n.toy.name),1),s("p",null,"Price: "+m(n.toy.price),1),s("ul",null,[(c(!0),u(w,null,E(n.toy.reviews,(i,h)=>(c(),u("li",{key:h+Math.ceil(Math.random()*100)},m(i),1))),128))])])):(c(),u("div",wt))}var xt=y(Tt,[["render",Bt]]),$={query:Ct,getById:Et,remove:At,save:It,getEmptyToy:Mt};function k(t=""){return`/api/toy/${t}`}function Ct(t){return T.get(k(),{params:t}).then(e=>e.data)}function Et(t){return T.get(k(t)).then(e=>e.data)}function At(t){return T.delete(k(t)).then(e=>e.data)}function It(t){return t._id?T.put(k(t._id),t).then(e=>e.data):T.post(k(),t).then(e=>e.data)}function Mt(){return{_id:"",name:"",price:null,labels:["Doll","Battery Powered","Baby"],createdAt:new Date(Date.now()).toLocaleString(),inStock:!0,reviews:["Good","Nice","Fun"]}}const Dt={components:{},data(){return{toyToEdit:null}},created(){const t=this.toyId;t?this.$store.dispatch({type:"getToyById",toyId:t}).then(e=>{this.toyToEdit=e}).catch(()=>b("Cannot get toy","danger")):this.toyToEdit=$.getEmptyToy()},methods:{save(){console.log(this.toyToEdit),this.$store.dispatch({type:"saveToy",toy:this.toyToEdit}).then(t=>{b(`New Toy with ID: ${t._id}`)}).catch(()=>b("Cannot add toy","danger")),this.$router.push("/toy")}},computed:{toyId(){return this.$route.params.id},pageTitle(){return this.toyId?"Edit toy":"Add toy"}}},Ft={class:"toy-edit app-main"},Lt=p("Is in stock? "),Ot=s("option",{value:"true"},"Yes",-1),Rt=s("option",{value:"false"},"No",-1),Nt=[Ot,Rt],Pt=K('<option value="On wheels">On wheels</option><option value="Box game">Box game</option><option value="Art">Art</option><option value="Baby">Baby</option><option value="Doll">Doll</option><option value="Puzzle">Puzzle</option><option value="Outdoor">Outdoor</option>',7),Vt=[Pt],Ut=s("button",null,"Save",-1);function zt(t,e,o,a,n,r){return c(),u("section",Ft,[s("h3",null,m(r.pageTitle),1),n.toyToEdit?(c(),u("form",{key:0,onSubmit:e[4]||(e[4]=W((...i)=>r.save&&r.save(...i),["prevent"])),class:"toy-edit-form"},[v(s("input",{type:"text",placeholder:"name","onUpdate:modelValue":e[0]||(e[0]=i=>n.toyToEdit.name=i)},null,512),[[A,n.toyToEdit.name]]),v(s("input",{type:"price",placeholder:"price","onUpdate:modelValue":e[1]||(e[1]=i=>n.toyToEdit.price=i)},null,512),[[A,n.toyToEdit.price]]),s("label",null,[Lt,v(s("select",{"onUpdate:modelValue":e[2]||(e[2]=i=>n.toyToEdit.inStock=i)},Nt,512),[[C,n.toyToEdit.inStock]])]),v(s("select",{"onUpdate:modelValue":e[3]||(e[3]=i=>n.toyToEdit.labels=i),multiple:""},Vt,512),[[C,n.toyToEdit.labels]]),Ut],32)):x("",!0)])}var Ht=y(Dt,[["render",zt]]);X.register(...Z);const Gt=ee({name:"Home",props:{inStockTypes:Object},components:{DoughnutChart:te},created(){for(const[t,e]of Object.entries(this.inStockTypes))this.inventory.push(e.stockCount);console.log(this.inventory)},data(){return{inventory:[],testData:{labels:Object.keys(this.inStockTypes),datasets:[{backgroundColor:["#1b9ea2","#e64e69","#969696"],data:[12,4,4,2]}]}}}});function jt(t,e,o,a,n,r){const i=f("DoughnutChart");return c(),S(i,{chartData:t.testData},null,8,["chartData"])}var U=y(Gt,[["render",jt]]);const qt={extends:oe,props:{pricePerType:Object,required:!0},data(){return{chartdata:{labels:["0-10","11-50","51-100","100-200","200+"],title:"Prices",datasets:[{label:"Funny",backgroundColor:"#1b9ea2",data:[12,54,88]},{label:"Adult",backgroundColor:"#e9fe7e",data:[2,60,55]},{label:"Educational",backgroundColor:"#e64e69",data:[2,60,55]}]},options:{title:{display:!0}}}},created(){},mounted(){this.renderChart(this.chartdata,this.options)}};const Jt={data(){return{dataReady:!1}},computed:{toys(){return this.$store.getters.toys},inStockTypesMap(){var t;return(t=this.toys)==null?void 0:t.reduce((e,o)=>(o.labels.forEach(a=>(e[a]||(e[a]={stockCount:0}),o.inStock&&e[a].stockCount++,e[a])),e),{})},pricePerType(){var t;return(t=this.toys)==null?void 0:t.reduce((e,o)=>(console.log(e),o.type!=="Funny"?(console.log("DATAAAAA",e),e):(parseInt(o.price)<=10?e["0-10"]++:parseInt(o.price)<=50?e["11-50"]++:parseInt(o.price)<=100?e["51-100"]++:parseInt(o.price)<=200?e["100-200"]++:e["200+"]++,e)),{"0-10":0,"11-50":0,"51-100":0,"100-200":0,"200+":0})}},created(){this.$store.dispatch("loadToys").then(()=>this.dataReady=!0)},components:{pieChart:U,barChart:qt}},Yt=t=>(ne("data-v-5b9feef1"),t=t(),se(),t),Qt={class:"dashboard-page-container flex"},Wt=Yt(()=>s("h1",null,"Dashboard",-1));function Kt(t,e,o,a,n,r){const i=U;return c(),u("section",Qt,[Wt,n.dataReady?(c(),S(i,{key:0,class:"pie-chart",inStockTypes:r.inStockTypesMap},null,8,["inStockTypes"])):x("",!0)])}var Xt=y(Jt,[["render",Kt],["__scopeId","data-v-5b9feef1"]]);const Zt=re({history:ie("/"),routes:[{path:"/",name:"Home",component:Fe},{path:"/toy",name:"ToyApp",component:bt},{path:"/about",name:"About",component:Ne},{path:"/dashboard",name:"Dashboard",component:Xt},{path:"/toy/:id",name:"ToyDetails",component:xt},{path:"/toy/edit/:id?",name:"ToyEdit",component:Ht}]});var eo={state:{toys:[],filterBy:null},getters:{toys(t){return JSON.parse(JSON.stringify(t.toys))},toysToShow(t){return JSON.parse(JSON.stringify(t.toys))}},mutations:{setToys(t,{toys:e}){t.toys=e},removeToy(t,{id:e}){const o=t.toys.findIndex(a=>a._id===e);t.toys.splice(o,1)},saveToy(t,{toy:e}){const o=t.toys.findIndex(a=>a._id===e._id);o!==-1?t.toys.splice(o,1,e):t.toys.push(e)},setFilter(t,{filterBy:e}){t.filterBy=e}},actions:{loadToys(t,e){let o=F({},t.state.filterBy);return $.query(o).then(a=>{t.commit({type:"setToys",toys:a})}).catch(a=>{throw console.log("Error: cannot get toys",a),a})},removeToy({commit:t},{id:e}){return $.remove(e).then(()=>{t({type:"removeToy",id:e})}).catch(o=>{throw console.log("Error: cannot remove toy",o),o})},saveToy({commit:t},{toy:e}){return $.save(e).then(o=>(t({type:"saveToy",toy:o}),console.log("savedToy",o),o)).catch(o=>{throw console.log("Error: cannot save toy",o),o})},getToyById(t,{toyId:e}){return $.getById(e).then(o=>o).catch(o=>{throw console.log("Error: cannot get toy",o),o})},setFilterAct({commit:t,dispatch:e},{filterBy:o}){t({type:"setFilter",filterBy:o}),e({type:"loadToys"})}}};const to=ae({strict:!0,state:{count:10},getters:{count(t){return t.count}},mutations:{setCount(t,{count:e}){t.count=e}},actions:{},modules:{toyModule:eo}});const B=le(Ee);B.use(ce,{load:{key:"AIzaSyAxYW_FjuUgnuOXRQY7Re8yde2lPtht1Qk"}});B.use(Zt);B.use(to);B.use(ue);B.mount("#app");
